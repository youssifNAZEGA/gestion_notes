"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getRandomJoke = exports.jokesGenerator = void 0;
const promises_1 = require("node:fs/promises");
const meme_1 = __importDefault(require("./meme"));
async function loadLocalJoke(file_path) {
    try {
        const jokeStringData = await (0, promises_1.readFile)(file_path, 'utf-8');
        const data = JSON.parse(jokeStringData);
        return data;
    }
    catch (error) {
        throw error;
    }
}
async function* jokesGenerator(file_path) {
    try {
        const jokes = await loadLocalJoke(file_path);
        for (let i = 0; i < jokes.length; i++) {
            yield meme_1.default.fromJSON(jokes[i]);
        }
    }
    catch (error) {
        throw error;
    }
}
exports.jokesGenerator = jokesGenerator;
async function getRandomJoke(file_path) {
    try {
        const jokes = await loadLocalJoke(file_path);
        const randomIndex = Math.floor(Math.random() * jokes.length);
        return meme_1.default.fromJSON(jokes[randomIndex]);
    }
    catch (error) {
        throw error;
    }
}
exports.getRandomJoke = getRandomJoke;
