#!/usr/bin/env node
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const commander_1 = require("commander");
const jokeAction_1 = __importDefault(require("./jokeAction"));
const logger_1 = __importDefault(require("../../utils/logger"));
const jokeCommand = new commander_1.Command('joke');
jokeCommand
    .option('-t, --theme <type>', 'Theme of the joke (e.g., general, geek)', 'general')
    .option('-k, --key <apiKey>', 'Gemini API key')
    .description('Fetch a random joke')
    .action(async (options) => {
    const apiKey = options.key || process.env.GEMINI_API_KEY;
    if (!apiKey) {
        logger_1.default.info('❌ No Gemini API key provided. Please provide it via --key option or GEMINI_API_KEY environment variable.');
    }
    const jokeAction = jokeAction_1.default.getAction(apiKey);
    const joke = await jokeAction.generate({ theme: options.theme });
    logger_1.default.debug(`Blague générée :\n${joke.toString()}`);
});
exports.default = jokeCommand;
